<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Clientes</title>
    <link rel="stylesheet" href="/primeraChamba/estilos/verturno.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>

</head>
<body>
<?php require './app/templates/header.phtml'; ?>  
<div class="container">
    <div class="form-section">
        <div class="border">
            <div class="header-form">
                <div class="seccion-derecha">
                    <img src="/primeraChamba/static/logo-turno.png" alt="Logo" class="logoturno">
                    <div class="informacion">
                        <div class="redes">
                            E-mail: gpmotos.tandil@gmail.com <br>
                            ridersmotos_tandil@yahoo.com.ar
                        </div>
                        <div class="ubicacion">
                            Av. Balvin 1119 - TANDIL <br>
                            Tel. (0249) 442-5978 <br> 2494321570
                        </div>
                    </div>
                </div>
                <div class="seccion-izquierda">
                    <h1 class="x">X</h1>
                    <div class="orden-seccion"> 
                        <h2 class="orden">ORDEN DE REPARACIÓN</h2> 
                        <span class="texto-inferior">DOCUMENTO NO VÁLIDO COMO FACTURA</span>
                        <h1>ORIGINAL N°: 00<?= $turno->id ?></h1>
                    </div>  
                </div>
            </div>

            <form action="" method="POST" enctype="multipart/form-data">
                <div class="parte-superior">
                    <div class="form-group-1">
                        <label id="top" for="ingreso">Ingreso</label>
                        <input name="ingreso" type="date" class="form-control" id="ingreso" placeholder="Fecha ingreso" value="<?= $turno->ingreso ?>">
                    </div>

                    <div class="form-group-1">
                        <label id="top" for="entrega">Entrega</label>
                        <input name="entrega" type="date" class="form-control" id="entrega" placeholder="Fecha entrega" value="<?= $turno->ingreso ?>">
                    </div>

                    <div class="form-group-1">
                        <label id="top" for="color">Color</label>
                        <input name="color" type="text" class="form-control" id="color" placeholder="Color" value=" ">
                    </div>
                    <div class="form-group-1">
                        <label id="top" for="kilometros">Kilometros</label>
                        <input name="kilometros" type="number" class="form-control" id="kilometros" placeholder="kms" value=" ">
                    </div>

                    <div class="form-group-1">
                        <label id="top" for="motor">Motor</label>
                        <input name="motor" type="text" class="form-control" id="motor" placeholder="Motor" value=" ">
                    </div>
                </div>

                <div class="parte-intermedia">
                    <div id="intermedia" class="form-group-1">
                        <label id="top" for="chasis">Chasis</label>
                        <input name="chasis" type="text" class="form-control" id="chasis" placeholder="Chasis" value=" ">
                    </div>

                    <div id="intermedia" class="form-group-1">
                        <label id="top" for="patente">Patente</label>
                        <input name="patente" type="text" class="form-control" id="patente" placeholder="Patente" value="<?= $turno->patente ?>">
                    </div>

                    <div id="intermedia" class="form-group-1">
                        <label id="top" for="modelo">Modelo</label>
                        <input name="modelo" type="text" class="form-control" id="modelo" placeholder="Modelo" value="<?= $moto->modelo ?>">
                    </div>
                </div>

                <div class="parte-inferior">
                    <div class="form-group-1">
                        <label id="top" for="nombre">Apellido y nombre</label>
                        <input name="nombre" type="text" class="form-control" id="nombre" placeholder="Nombre" value="<?= $cliente->nombre ?>">
                    </div>

                    <div class="form-group-1">
                        <label id="top" for="documento">Documento</label>
                        <input name="documento" type="number" class="form-control" id="documento" placeholder="Documento" value="<?= $cliente->dni ?>">
                    </div>

                    <div class="form-group-1">
                        <label id="top" for="direccion">Direccion</label>
                        <input name="direccion" type="text" class="form-control" id="direccion" placeholder="Direccion" value=" ">
                    </div>

                    <div class="form-group-1">
                        <label id="top" for="telefono">Telefono</label>
                        <input name="telefono" type="number" class="form-control" id="telefono" placeholder="Telefono" value="<?= $cliente->telefono ?>">
                    </div>
                </div>

                <div class="descripcion">
                    <div class="form-group-1">
                        <label id="desc" for="descripcion">Descripcion</label>
                        <input name="descripcion" type="text" class="form-control input-lineas" id="descripcion" placeholder="Descripción" value="<?= $moto->descripcion ?>">
                    </div>
                </div>

                <div class="observaciones">
                    <div class="form-group-1">
                        <label id="observacion" for="observaciones">Observaciones sobre el estado del vehiculo</label>
                        <input name="observaciones" type="text" class="form-control input-lineas" id="observaciones" placeholder="Observaciones" value="<?= $moto->observaciones ?>">
                    </div>
                </div>

                <div class="ultima-seccion"> 
                    <div class="seccion-derecha-inferior">
                        <label id="top">Resumen del acuerdo</label>
                        <div class="conceptos">
                            <div class="form-group-2">
                                <label for="conceptos">Conceptos</label>
                                <input name="conceptos" type="text" class="form-control" id="conceptos" placeholder="Conceptos" value=" ">
                            </div>
                            <div class="form-group-2">
                                <label for="ManoDeObra">Mano de obra</label>
                                <input name="ManoDeObra" type="text" class="form-control" id="ManoDeObra" placeholder="Mano de obra" value=" ">
                            </div>

                            <div class="form-group-2">
                                <label for="repuestos">Repuestos</label>
                                <input name="repuestos" type="text" class="form-control" id="repuestos" placeholder="Repuestos" value=" ">
                            </div>

                            <div class="form-group-2">
                                <label for="terceros">Trabajo de terceros</label>
                                <input name="terceros" type="text" class="form-control" id="terceros" placeholder="Terceros" value=" ">
                            </div>
                        </div>

                        <div class="total-seccion">
                            <div class="form-group-3">
                                <label for="iva">IVA</label>
                                <input name="iva" type="text" class="form-control" id="iva" placeholder="IVA" value=" ">
                            </div>
                            <div class="form-group-3">
                                <label for="neto">Neto</label>
                                <input name="neto" type="text" class="form-control" id="neto" placeholder="neto" value=" ">
                            </div>
                            <div class="form-group-3">
                                <label for="total">TOTAL</label>
                                <input name="TOTAL" type="text" class="form-control" id="total" placeholder="total" value=" ">
                            </div>
                        </div>
                    </div>

                    <div class="seccion-izquierda-inferior">
                        <label id="top" for="combustible">Combustible</label>
                        <div class="form-group-2">
                            <label for="combustible">Combustible</label>
                            <select name="combustible" class="form-control" id="combustible">
                                <option value="1/4">1/4</option>
                                <option value="1/2">1/2</option>
                                <option value="3/4">3/4</option>
                                <option value="4/4">4/4</option>
                            </select>
                        </div>

                        <div class="form-group-2">
                            <label for="aceite">Aceite en motor</label>
                            <select name="aceite" class="form-control" id="aceite">
                                <option value="si">si</option>
                                <option value="no">no</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Botón para guardar la imagen -->
                <button id="guardarImagen" class="btn btn-primary">Guardar como Imagen</button>
            </form>
        </div>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const boton = document.getElementById("guardarImagen");

    boton.addEventListener("click", function(e) {
        e.preventDefault(); // Previene el comportamiento por defecto del botón

        let formulario = document.querySelector(".form-section");

        // Aquí obtienes el valor del id del turno directamente de PHP
        let turnoId = <?= $turno->id ?>;

        // Generar el PDF usando html2pdf.js
        html2pdf()
            .from(formulario) // Selecciona el formulario para convertir en PDF
            .save(`Turno_${turnoId}.pdf`); // Usar el ID del turno en el nombre del archivo
    });
});
</script>


</body>
</html>